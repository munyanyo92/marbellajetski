<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserva Tu Aventura | Marbella JetSki</title>
    <meta name="description" content="Reserva motos de agua, alquiler de yates y deportes acuáticos en Marbella. Confirmación inmediata, pago seguro, cancelación gratuita. Abierto todos los días de 11h a 20h.">
    <link rel="icon" type="image/png" href="../assets/media/photos/logo-circular.png">
    <link rel="manifest" href="../manifest.json">
    <meta property="og:title" content="Reserva Tu Aventura | Marbella JetSki">
    <meta property="og:description" content="Reserva motos de agua, alquiler de yates y deportes acuáticos en Marbella. Pago seguro, cancelación gratuita 24h.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://marbellajetski.com/wp-content/uploads/2021/05/MJS_16_500x500.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../styles.css?v=2026020923">
    <style>
        /* ========== Booking Page Specific Styles ========== */
        .booking-page-hero {
            background: linear-gradient(135deg, #03045e 0%, #0077b6 50%, #00b4d8 100%);
            padding: 140px 0 80px;
            text-align: center;
            color: white;
        }
        .booking-page-hero h1 {
            font-family: var(--font-display);
            font-size: 3rem;
            margin-bottom: 15px;
        }
        .booking-page-hero p {
            font-size: 1.15rem;
            opacity: 0.85;
            max-width: 600px;
            margin: 0 auto;
        }
        .booking-main { padding: 60px 0 100px; background: #f8fbfe; }
        .booking-layout { display: grid; grid-template-columns: 1fr 380px; gap: 40px; align-items: start; }
        .booking-steps { display: flex; gap: 0; margin-bottom: 40px; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
        .step { flex: 1; padding: 18px 20px; text-align: center; font-weight: 600; font-size: 0.9rem; color: var(--gray-400); border-bottom: 3px solid transparent; cursor: pointer; transition: all 0.3s ease; }
        .step.active { color: var(--primary); border-bottom-color: var(--primary); background: rgba(0, 180, 216, 0.04); }
        .step.completed { color: #10b981; border-bottom-color: #10b981; }
        .step-number { display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 50%; background: var(--gray-200); color: var(--gray-500); font-size: 0.8rem; margin-right: 8px; }
        .step.active .step-number { background: var(--primary); color: white; }
        .step.completed .step-number { background: #10b981; color: white; }
        .step-panel { display: none; background: white; border-radius: 16px; padding: 35px; box-shadow: 0 4px 20px rgba(0,0,0,0.06); }
        .step-panel.active { display: block; }
        .step-panel h3 { font-size: 1.3rem; margin-bottom: 25px; display: flex; align-items: center; gap: 10px; }
        .step-panel h3 i { color: var(--primary); }
        .category-tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .cat-tab { padding: 10px 20px; border-radius: 50px; border: 2px solid var(--gray-200); background: white; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.3s ease; }
        .cat-tab.active, .cat-tab:hover { border-color: var(--primary); background: rgba(0, 180, 216, 0.05); color: var(--primary); }
        .activity-options { display: flex; flex-direction: column; gap: 10px; max-height: 550px; overflow-y: auto; padding-right: 5px; }
        .activity-option { display: flex; align-items: center; gap: 15px; padding: 15px 18px; border: 2px solid var(--gray-200); border-radius: 12px; cursor: pointer; transition: all 0.3s ease; }
        .activity-option:hover { border-color: var(--primary-light); }
        .activity-option.selected { border-color: var(--primary); background: rgba(0, 180, 216, 0.04); }
        .activity-option input[type="radio"] { width: 20px; height: 20px; accent-color: var(--primary); }
        .activity-option .name { font-weight: 600; font-size: 0.95rem; }
        .activity-option .duration { font-size: 0.8rem; color: var(--gray-500); }
        .activity-option .capacity { margin-left: auto; font-size: 0.82rem; color: var(--gray-500); white-space: nowrap; }
        .activity-option .price { font-weight: 800; font-size: 1.1rem; color: var(--primary-dark); white-space: nowrap; }
        .datetime-grid, .guests-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .field { display: flex; flex-direction: column; gap: 6px; }
        .field.full { grid-column: 1 / -1; }
        .field label { font-weight: 600; font-size: 0.85rem; color: var(--gray-700); }
        .field input, .field select, .field textarea { padding: 12px 16px; border: 2px solid var(--gray-200); border-radius: 10px; font-size: 0.9rem; font-family: inherit; transition: border-color 0.3s; }
        .field input:focus, .field select:focus, .field textarea:focus { outline: none; border-color: var(--primary); }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .payment-methods { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
        .payment-method { display: flex; align-items: center; gap: 15px; padding: 18px; border: 2px solid var(--gray-200); border-radius: 12px; cursor: pointer; transition: all 0.3s ease; }
        .payment-method:hover { border-color: var(--primary-light); }
        .payment-method.selected { border-color: var(--primary); background: rgba(0, 180, 216, 0.04); }
        .payment-method input[type="radio"] { width: 20px; height: 20px; accent-color: var(--primary); }
        .payment-method .method-info h5 { font-size: 0.95rem; margin-bottom: 3px; }
        .payment-method .method-info p { font-size: 0.82rem; color: var(--gray-500); }
        .payment-icons { margin-left: auto; display: flex; gap: 8px; font-size: 1.4rem; color: var(--gray-400); }
        .card-fields { display: none; background: var(--gray-100); border-radius: 12px; padding: 25px; margin-top: 15px; }
        .card-fields.visible { display: block; }
        .deposit-toggle { display: flex; gap: 12px; margin-bottom: 25px; }
        .deposit-option { flex: 1; padding: 18px 20px; border: 2px solid var(--gray-200); border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.3s ease; }
        .deposit-option.selected { border-color: var(--primary); background: rgba(0, 180, 216, 0.05); }
        .deposit-option .amount { font-size: 1.4rem; font-weight: 800; color: var(--primary-dark); }
        .deposit-option .label { font-size: 0.82rem; color: var(--gray-500); margin-top: 4px; }
        .terms-check { display: flex; align-items: flex-start; gap: 12px; margin: 25px 0; padding: 18px; background: var(--gray-100); border-radius: 10px; }
        .terms-check input { width: 20px; height: 20px; margin-top: 2px; accent-color: var(--primary); }
        .terms-check label { font-size: 0.85rem; color: var(--gray-600); line-height: 1.6; }
        .terms-check a { color: var(--primary); text-decoration: underline; }
        .step-nav { display: flex; justify-content: space-between; margin-top: 30px; padding-top: 25px; border-top: 1px solid var(--gray-200); }
        .btn-back { padding: 14px 30px; border-radius: 50px; border: 2px solid var(--gray-300); background: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .btn-back:hover { border-color: var(--gray-400); }
        .btn-next { padding: 14px 35px; border-radius: 50px; border: none; background: var(--gradient-primary); color: white; font-weight: 700; font-size: 0.95rem; cursor: pointer; transition: all 0.3s ease; }
        .btn-next:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0, 180, 216, 0.3); }
        .order-summary { background: white; border-radius: 16px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.06); position: sticky; top: 100px; }
        .order-summary h4 { font-size: 1.1rem; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--gray-200); }
        .summary-row { display: flex; justify-content: space-between; padding: 10px 0; font-size: 0.9rem; }
        .summary-row .label { color: var(--gray-500); }
        .summary-row .value { font-weight: 600; color: var(--dark); }
        .summary-divider { border-top: 1px solid var(--gray-200); margin: 10px 0; }
        .summary-total { display: flex; justify-content: space-between; padding: 15px 0; font-size: 1.15rem; font-weight: 800; color: var(--dark); }
        .summary-total .total-price { color: var(--primary-dark); }
        .summary-badges { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--gray-200); }
        .summary-badge { display: flex; align-items: center; gap: 10px; font-size: 0.82rem; color: var(--gray-600); }
        .summary-badge i { color: #10b981; width: 18px; }
        .summary-whatsapp { display: block; text-align: center; margin-top: 20px; padding: 14px; background: #25d366; color: white; border-radius: 10px; font-weight: 600; font-size: 0.9rem; text-decoration: none; transition: all 0.3s ease; }
        .summary-whatsapp:hover { background: #1fb655; transform: translateY(-2px); }
        .confirmation { text-align: center; padding: 60px 40px; }
        .confirmation-icon { width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #10b981, #34d399); display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; font-size: 2rem; color: white; }
        .confirmation h3 { font-size: 1.6rem; margin-bottom: 12px; }
        .confirmation p { color: var(--gray-500); max-width: 450px; margin: 0 auto 30px; }
        .booking-ref { background: var(--gray-100); border-radius: 10px; padding: 15px 25px; display: inline-block; margin-bottom: 30px; }
        .booking-ref .ref-label { font-size: 0.8rem; color: var(--gray-500); text-transform: uppercase; letter-spacing: 1px; }
        .booking-ref .ref-number { font-size: 1.3rem; font-weight: 800; color: var(--primary-dark); }
        .policies-bar { background: white; padding: 30px 0; border-top: 1px solid var(--gray-200); }
        .policies-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; text-align: center; }
        .policy-item i { font-size: 1.5rem; color: var(--primary); margin-bottom: 10px; display: block; }
        .policy-item h5 { font-size: 0.85rem; color: var(--dark); margin-bottom: 4px; }
        .policy-item p { font-size: 0.78rem; color: var(--gray-500); }
        .validation-msg { background: #fef3c7; border: 1px solid #f59e0b; border-radius: 10px; padding: 14px 18px; margin: 15px 0; font-size: 0.88rem; color: #92400e; display: none; align-items: center; gap: 10px; }
        .validation-msg i { color: #f59e0b; font-size: 1.1rem; }
        .validation-msg.visible { display: flex; }
        @media (max-width: 992px) {
            .booking-layout { grid-template-columns: 1fr; }
            .booking-steps { flex-wrap: wrap; }
            .step { font-size: 0.8rem; }
            .form-grid { grid-template-columns: 1fr; }
            .policies-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 576px) {
            .step-panel { padding: 25px 20px; }
            .booking-page-hero h1 { font-size: 2rem; }
            .datetime-grid, .guests-grid { grid-template-columns: 1fr; }
            .deposit-toggle { flex-direction: column; }
            .policies-grid { grid-template-columns: 1fr; }
        }
        /* ========== Inline Calendar ========== */
        .calendar-container { background: white; border: 2px solid var(--gray-200); border-radius: 12px; padding: 20px; }
        .calendar-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
        .calendar-header h5 { font-size: 1rem; font-weight: 700; color: var(--dark); margin: 0; }
        .calendar-nav { background: none; border: 2px solid var(--gray-200); border-radius: 8px; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; font-size: 0.9rem; color: var(--gray-600); }
        .calendar-nav:hover { border-color: var(--primary); color: var(--primary); background: rgba(0,180,216,0.05); }
        .calendar-nav:disabled { opacity: 0.3; cursor: not-allowed; pointer-events: none; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; }
        .calendar-day-header { text-align: center; font-size: 0.72rem; font-weight: 700; color: var(--gray-400); padding: 8px 0; text-transform: uppercase; letter-spacing: 0.5px; }
        .calendar-day { text-align: center; padding: 10px 2px; border-radius: 8px; font-size: 0.88rem; font-weight: 500; cursor: pointer; transition: all 0.15s; color: var(--dark); border: 2px solid transparent; line-height: 1; }
        .calendar-day:hover:not(.disabled):not(.empty) { background: rgba(0,180,216,0.08); border-color: rgba(0,180,216,0.3); }
        .calendar-day.today { border-color: var(--primary); font-weight: 700; }
        .calendar-day.selected { background: var(--primary) !important; color: white !important; border-color: var(--primary) !important; font-weight: 700; box-shadow: 0 2px 8px rgba(0,180,216,0.3); }
        .calendar-day.disabled { color: var(--gray-300); cursor: not-allowed; text-decoration: line-through; opacity: 0.5; }
        .calendar-day.empty { cursor: default; }
        .calendar-selected-bar { display: flex; align-items: center; gap: 10px; padding: 12px 16px; background: rgba(16,185,129,0.08); border: 2px solid #10b981; border-radius: 10px; margin-top: 14px; font-weight: 600; font-size: 0.9rem; color: #065f46; }
        .calendar-selected-bar i { color: #10b981; font-size: 1.1rem; }
        .calendar-selected-bar.hidden { display: none; }
        /* ========== Boat Deposit Box ========== */
        .boat-deposit-box { border: 2px solid var(--primary); border-radius: 12px; padding: 24px; background: rgba(0,180,216,0.03); }
        .boat-deposit-amount { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 10px; }
        .boat-deposit-label { font-weight: 700; font-size: 1rem; color: var(--dark); }
        .boat-deposit-value { font-size: 1.6rem; font-weight: 800; color: var(--primary-dark); }
        .boat-deposit-info { display: flex; gap: 10px; padding: 14px; background: rgba(0,180,216,0.06); border-radius: 10px; }
        .boat-deposit-info i { color: var(--primary); margin-top: 2px; flex-shrink: 0; }
        .boat-deposit-info p { font-size: 0.85rem; color: var(--gray-600); margin: 0; line-height: 1.5; }
        .boat-balance-note { display: flex; align-items: center; gap: 8px; margin-top: 12px; font-size: 0.82rem; color: var(--gray-500); flex-wrap: wrap; }
        .boat-balance-note strong { color: var(--dark); }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Saltar al contenido</a>
    <!-- Navegación -->
    <nav class="navbar scrolled" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="../assets/media/photos/logo-circular.png" alt="Marbella JetSki Logo" class="logo-image" style="height: 75px;">
                <span class="logo-text">MARBELLA<span class="logo-highlight">JETSKI</span></span>
            </a>
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Inicio</a>
                <a href="index.html#services" class="nav-link">Servicios</a>
                <a href="index.html#jetski" class="nav-link">Motos de Agua</a>
                <a href="index.html#watersports" class="nav-link">Deportes</a>
                <a href="index.html#boats" class="nav-link">Yates</a>
                <a href="../about-us.html" class="nav-link">Sobre Nosotros</a>
                <a href="index.html#contact" class="nav-link">Contacto</a>
                <!-- Mobile-only footer -->
                <div class="mobile-menu-footer">
                    <div class="nav-lang-dropdown">
                        <button class="nav-lang-btn" aria-label="Idioma">
                            <img src="https://flagcdn.com/w40/es.png" alt="Español" width="24" height="16">
                            <span>ES</span>
                            <i class="fas fa-chevron-down" style="font-size:10px;margin-left:2px"></i>
                        </button>
                        <div class="nav-lang-menu">
                            <a href="../index.html"><img src="https://flagcdn.com/w40/gb.png" alt="English" width="20" height="14"> English</a>
                            <a href="index.html" class="active"><img src="https://flagcdn.com/w40/es.png" alt="Español" width="20" height="14"> Español</a>
                            <a href="../fr/index.html"><img src="https://flagcdn.com/w40/fr.png" alt="Français" width="20" height="14"> Français</a>
                            <a href="../nl/index.html"><img src="https://flagcdn.com/w40/nl.png" alt="Nederlands" width="20" height="14"> Nederlands</a>
                        </div>
                    </div>
                    <a href="booking.html" class="nav-cta"><span>Reservar</span><i class="fas fa-calendar-check"></i></a>
                </div>
            </div>
            <div class="nav-actions">
                <div class="nav-lang-dropdown">
                    <button class="nav-lang-btn" aria-label="Idioma">
                        <img src="https://flagcdn.com/w40/es.png" alt="Español" width="24" height="16">
                        <span>ES</span>
                        <i class="fas fa-chevron-down" style="font-size:10px;margin-left:2px"></i>
                    </button>
                    <div class="nav-lang-menu">
                        <a href="../booking.html"><img src="https://flagcdn.com/w40/gb.png" alt="English" width="20" height="14"> English</a>
                        <a href="booking.html" class="active"><img src="https://flagcdn.com/w40/es.png" alt="Español" width="20" height="14"> Español</a>
                        <a href="../fr/index.html"><img src="https://flagcdn.com/w40/fr.png" alt="Français" width="20" height="14"> Français</a>
                        <a href="../nl/index.html"><img src="https://flagcdn.com/w40/nl.png" alt="Nederlands" width="20" height="14"> Nederlands</a>
                    </div>
                </div>
                <a href="booking.html" class="nav-cta active">
                    <span>Reservar</span>
                    <i class="fas fa-calendar-check"></i>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle" aria-label="Abrir menú">
                <span></span><span></span><span></span>
            </button>
        </div>
    </nav>

    <main id="main-content">
    <!-- Hero -->
    <section class="booking-page-hero">
        <div class="container">
            <h1>Reserva Tu <span class="gradient-text-animated">Aventura</span></h1>
            <p>Selecciona tu actividad, elige una fecha y reserva tu plaza en minutos. Abierto todos los días de 11h a 20h.</p>
        </div>
    </section>

    <!-- Reserva Principal -->
    <section class="booking-main">
        <div class="container">
            <!-- Indicador de Pasos -->
            <div class="booking-steps">
                <div class="step active" data-step="1">
                    <span class="step-number">1</span> Elige Actividad
                </div>
                <div class="step" data-step="2">
                    <span class="step-number">2</span> Fecha y Detalles
                </div>
                <div class="step" data-step="3">
                    <span class="step-number">3</span> Tus Datos
                </div>
                <div class="step" data-step="4">
                    <span class="step-number">4</span> Pago
                </div>
            </div>

            <div class="booking-layout">
                <div class="booking-form-area">
                    <!-- PASO 1: Elegir Actividad -->
                    <div class="step-panel active" id="step1">
                        <h3><i class="fas fa-water"></i> Elige Tu Actividad</h3>
                        
                        <div class="category-tabs">
                            <button class="cat-tab active" data-cat="all">Todos</button>
                            <button class="cat-tab" data-cat="jetski">Motos de Agua</button>
                            <button class="cat-tab" data-cat="watersports">Deportes Acuáticos</button>
                            <button class="cat-tab" data-cat="yacht">Alquiler de Yates</button>
                            <button class="cat-tab" data-cat="training" style="border-color:var(--accent-gold);color:var(--accent-gold);"><i class="fas fa-trophy"></i> Con Piloto Profesional</button>
                        </div>

                        <div class="activity-options" id="activityList">
                            <!-- Motos de Agua -->
                            <label class="activity-option" data-cat="jetski">
                                <input type="radio" name="activity" value="jetski-circuit-20" data-price="70" data-name="Circuito Moto de Agua" data-name-en="Jet Ski Circuit" data-duration="20 min" data-type="circuit">
                                <div>
                                    <div class="name">Circuito Moto de Agua</div>
                                    <div class="duration">20 minutos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1-2</span>
                                <span class="price">€70</span>
                            </label>
                            <label class="activity-option" data-cat="jetski">
                                <input type="radio" name="activity" value="jetski-circuit-30" data-price="90" data-name="Circuito Moto de Agua" data-name-en="Jet Ski Circuit" data-duration="30 min" data-type="circuit">
                                <div>
                                    <div class="name">Circuito Moto de Agua</div>
                                    <div class="duration">30 minutos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1-2</span>
                                <span class="price">€90</span>
                            </label>
                            <label class="activity-option" data-cat="jetski">
                                <input type="radio" name="activity" value="jetski-circuit-60" data-price="170" data-name="Circuito Moto de Agua" data-name-en="Jet Ski Circuit" data-duration="1 hora" data-type="circuit">
                                <div>
                                    <div class="name">Circuito Moto de Agua <span style="color:var(--secondary);font-size:0.75rem;font-weight:700;">POPULAR</span></div>
                                    <div class="duration">1 hora</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1-2</span>
                                <span class="price">€170</span>
                            </label>
                            <label class="activity-option" data-cat="jetski">
                                <input type="radio" name="activity" value="jetski-circuit-120" data-price="330" data-name="Circuito Moto de Agua" data-name-en="Jet Ski Circuit" data-duration="2 horas" data-type="circuit">
                                <div>
                                    <div class="name">Circuito Moto de Agua</div>
                                    <div class="duration">2 horas</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1-2</span>
                                <span class="price">€330</span>
                            </label>
                            <label class="activity-option" data-cat="jetski">
                                <input type="radio" name="activity" value="jetski-excursion-60" data-price="170" data-name="Excursión Moto de Agua" data-name-en="Jet Ski Excursion" data-duration="1 hora" data-type="tour">
                                <div>
                                    <div class="name">Excursión Moto de Agua</div>
                                    <div class="duration">1 hora — Puerto Banús / Fuengirola / Costa</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1-2</span>
                                <span class="price">€170</span>
                            </label>

                            <!-- Deportes Acuáticos -->
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="wakeboard" data-price="90" data-name="Wakeboard" data-name-en="Wakeboarding" data-duration="20 min" data-per="ride">
                                <div>
                                    <div class="name">Wakeboard</div>
                                    <div class="duration">20 minutos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1</span>
                                <span class="price">€90</span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="waterski" data-price="90" data-name="Esquí Acuático" data-name-en="Water Skiing" data-duration="20 min" data-per="ride">
                                <div>
                                    <div class="name">Esquí Acuático</div>
                                    <div class="duration">20 minutos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1</span>
                                <span class="price">€90</span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="banana" data-price="20" data-name="Banana Boat" data-name-en="Banana Boat" data-duration="10 min" data-per="person" data-type="towable">
                                <div>
                                    <div class="name">Banana Boat</div>
                                    <div class="duration">10 min · €20/persona</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 8</span>
                                <span class="price">€20<small>/pp</small></span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="sofa" data-price="20" data-name="Crazy Sofa" data-name-en="Crazy Sofa" data-duration="10 min" data-per="person" data-type="towable">
                                <div>
                                    <div class="name">Crazy Sofa</div>
                                    <div class="duration">10 min · €20/persona</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 6</span>
                                <span class="price">€20<small>/pp</small></span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="waterbull" data-price="20" data-name="Water Bull" data-name-en="Water Bull" data-duration="10 min" data-per="person" data-type="towable">
                                <div>
                                    <div class="name">Water Bull</div>
                                    <div class="duration">10 min · €20/persona</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 6</span>
                                <span class="price">€20<small>/pp</small></span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="airstream" data-price="20" data-name="Air Stream" data-name-en="Air Stream" data-duration="10 min" data-per="person" data-type="towable">
                                <div>
                                    <div class="name">Air Stream</div>
                                    <div class="duration">10 min · €20/persona</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> 1-6</span>
                                <span class="price">€20<small>/pp</small></span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="donut" data-price="20" data-name="Donut Ride" data-name-en="Donut Ride" data-duration="10 min" data-per="person" data-type="towable">
                                <div>
                                    <div class="name">Donut Ride</div>
                                    <div class="duration">10 min · €20/persona</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 6</span>
                                <span class="price">€20<small>/pp</small></span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="sup" data-price="25" data-name="Paddle Surf (SUP)" data-name-en="Stand-Up Paddleboarding" data-duration="1 hora" data-type="sup">
                                <div>
                                    <div class="name">Paddle Surf (SUP) <span style="font-size:0.75rem;color:var(--gray-500);">Individual</span></div>
                                    <div class="duration">1 hora · Actividad individual</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1</span>
                                <span class="price">€25</span>
                            </label>
                            <label class="activity-option" data-cat="watersports">
                                <input type="radio" name="activity" value="pedal" data-price="30" data-name="Hidropedal con Tobogán" data-name-en="Pedal Boat with Slide" data-duration="1 hora">
                                <div>
                                    <div class="name">Hidropedal con Tobogán</div>
                                    <div class="duration">1 hora · ¡Para toda la familia!</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 5</span>
                                <span class="price">€30</span>
                            </label>

                            <!-- Alquiler de Yates -->
                            <label class="activity-option" data-cat="yacht">
                                <input type="radio" name="activity" value="yacht-2h" data-price="600" data-name="Alquiler de Yate" data-name-en="Yacht Charter" data-duration="2 horas">
                                <div>
                                    <div class="name">Alquiler de Yate — 2 Horas</div>
                                    <div class="duration">Patrón, combustible, bebidas y paddle surf incluidos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 12</span>
                                <span class="price">€600</span>
                            </label>
                            <label class="activity-option" data-cat="yacht">
                                <input type="radio" name="activity" value="yacht-3h" data-price="800" data-name="Alquiler de Yate" data-name-en="Yacht Charter" data-duration="3 horas">
                                <div>
                                    <div class="name">Alquiler de Yate — 3 Horas</div>
                                    <div class="duration">Patrón, combustible, bebidas y paddle surf incluidos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 12</span>
                                <span class="price">€800</span>
                            </label>
                            <label class="activity-option" data-cat="yacht">
                                <input type="radio" name="activity" value="yacht-4h" data-price="1000" data-name="Alquiler de Yate" data-name-en="Yacht Charter" data-duration="4 horas">
                                <div>
                                    <div class="name">Alquiler de Yate — 4 Horas <span style="color:var(--secondary);font-size:0.75rem;font-weight:700;">MEJOR PRECIO</span></div>
                                    <div class="duration">Patrón, combustible, bebidas y paddle surf incluidos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 12</span>
                                <span class="price">€1.000</span>
                            </label>
                            <label class="activity-option" data-cat="yacht">
                                <input type="radio" name="activity" value="yacht-6h" data-price="1500" data-name="Alquiler de Yate" data-name-en="Yacht Charter" data-duration="6 horas">
                                <div>
                                    <div class="name">Alquiler de Yate — 6 Horas</div>
                                    <div class="duration">Patrón, combustible, bebidas y paddle surf incluidos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 12</span>
                                <span class="price">€1.500</span>
                            </label>
                            <label class="activity-option" data-cat="yacht">
                                <input type="radio" name="activity" value="yacht-8h" data-price="1800" data-name="Alquiler de Yate" data-name-en="Yacht Charter" data-duration="Día completo">
                                <div>
                                    <div class="name">Alquiler de Yate — Día Completo (8h)</div>
                                    <div class="duration">Patrón, combustible, bebidas y paddle surf incluidos</div>
                                </div>
                                <span class="capacity"><i class="fas fa-users"></i> Hasta 12</span>
                                <span class="price">€1.800</span>
                            </label>

                            <!-- Entrenamiento con Piloto Profesional (solo bajo petición) -->
                            <label class="activity-option" data-cat="training" style="border-left:3px solid var(--accent-gold);">
                                <input type="radio" name="activity" value="training-daniel" data-price="0" data-name="Entrenamiento con Piloto Profesional" data-name-en="Training with a Professional Pilot" data-duration="Sujeto a confirmación" data-type="request-only">
                                <div>
                                    <div class="name">Entrenamiento con Piloto Profesional <span style="background:var(--accent-gold);color:#000;font-size:0.7rem;padding:2px 8px;border-radius:10px;font-weight:700;">BAJO PETICIÓN</span></div>
                                    <div class="duration">Solo mañanas (10:00–14:00) · Coaching personal con piloto profesional de competición</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1-2</span>
                                <span class="price" style="color:var(--accent-gold);">Contáctanos</span>
                            </label>
                            <label class="activity-option" data-cat="training" style="border-left:3px solid var(--accent-gold);">
                                <input type="radio" name="activity" value="racing-daniel" data-price="0" data-name="Experiencia Racing con Piloto Profesional" data-name-en="Racing Experience with a Professional Pilot" data-duration="Sujeto a confirmación" data-type="request-only">
                                <div>
                                    <div class="name">Experiencia Racing <span style="background:var(--accent-gold);color:#000;font-size:0.7rem;padding:2px 8px;border-radius:10px;font-weight:700;">BAJO PETICIÓN</span></div>
                                    <div class="duration">Solo mañanas (10:00–14:00) · Circuito armado por Daniel para poner a prueba tu destreza</div>
                                </div>
                                <span class="capacity"><i class="fas fa-user"></i> 1-2</span>
                                <span class="price" style="color:var(--accent-gold);">Contáctanos</span>
                            </label>
                        </div>

                        <!-- Aviso solo petición para Entrenamiento/Racing -->
                        <div id="trainingNotice" style="display:none;background:linear-gradient(135deg,#fef3c7,#fde68a);border:2px solid var(--accent-gold);border-radius:12px;padding:20px;margin-top:16px;">
                            <h4 style="color:#92400e;margin-bottom:8px;"><i class="fas fa-info-circle"></i> Solo Solicitud de Disponibilidad</h4>
                            <p style="color:#78350f;font-size:0.9rem;margin-bottom:12px;">Las sesiones de entrenamiento con nuestro piloto profesional no se pueden reservar directamente online. Contacta con nosotros para consultar disponibilidad. Solo disponible por las mañanas (10:00–14:00).</p>
                            <div style="display:flex;gap:12px;flex-wrap:wrap;">
                                <a href="https://api.whatsapp.com/send?phone=34655442232&text=¡Hola%20Daniel!%20Me%20interesa%20una%20sesión%20de%20entrenamiento%2Fracing.%20¿Podrías%20decirme%20tu%20disponibilidad%3F" target="_blank" rel="noopener noreferrer" style="display:inline-flex;align-items:center;gap:8px;background:#25D366;color:white;padding:12px 20px;border-radius:50px;font-weight:600;text-decoration:none;font-size:0.9rem;"><i class="fab fa-whatsapp"></i> WhatsApp Daniel</a>
                                <a href="tel:+34655442232" style="display:inline-flex;align-items:center;gap:8px;background:var(--primary);color:white;padding:12px 20px;border-radius:50px;font-weight:600;text-decoration:none;font-size:0.9rem;"><i class="fas fa-phone-alt"></i> +34 655 442 232</a>
                            </div>
                        </div>

                        <div class="step-nav">
                            <div></div>
                            <button class="btn-next" onclick="goToStep(2)">Continuar <i class="fas fa-arrow-right"></i></button>
                        </div>
                    </div>

                    <!-- PASO 2: Fecha y Detalles -->
                    <div class="step-panel" id="step2">
                        <h3><i class="fas fa-calendar-alt"></i> Elige Fecha y Detalles</h3>
                        
                        <div id="sameDayMsg" class="validation-msg">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Las reservas para hoy solo se aceptan hasta las 14:00. Para reservas de última hora, contacta por <a href="https://api.whatsapp.com/send?phone=34655442232&text=Hola!%20Me%20gustaría%20reservar%20para%20hoy" target="_blank" rel="noopener noreferrer" style="color:#92400e;font-weight:700;">WhatsApp</a> o llama al <a href="tel:+34655442232" style="color:#92400e;font-weight:700;">+34 655 442 232</a>.</span>
                        </div>

                        <div id="maxJetskiMsg" class="validation-msg">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Máximo 4 motos de agua simultáneas en circuito. Para grupos más grandes, contacta con nosotros.</span>
                        </div>

                        <div id="minTourMsg" class="validation-msg">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Las excursiones/tours requieren un mínimo de 2 motos de agua.</span>
                        </div>

                        <div id="minTowableMsg" class="validation-msg">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Las actividades de arrastre (banana, sofa, donut…) requieren un mínimo de 2 participantes.</span>
                        </div>

                        <div class="field" style="margin-bottom:20px;">
                            <label><i class="fas fa-calendar-alt" style="color:var(--primary);margin-right:6px;"></i> Fecha Preferida *</label>
                            <input type="hidden" id="bookDate" required>
                            <div id="calendarWidget" class="calendar-container"></div>
                            <div id="calendarSelectedBar" class="calendar-selected-bar hidden">
                                <i class="fas fa-calendar-check"></i>
                                <span id="calendarSelectedText"></span>
                            </div>
                        </div>
                        <div class="field" style="margin-bottom:20px;max-width:300px;">
                            <label for="bookTime"><i class="fas fa-clock" style="color:var(--primary);margin-right:6px;"></i> Hora Preferida *</label>
                            <select id="bookTime" required>
                                <option value="">Selecciona hora...</option>
                                <option value="11:00">11:00</option>
                                <option value="11:30">11:30</option>
                                <option value="12:00">12:00</option>
                                <option value="12:30">12:30</option>
                                <option value="13:00">13:00</option>
                                <option value="13:30">13:30</option>
                                <option value="14:00">14:00</option>
                                <option value="14:30">14:30</option>
                                <option value="15:00">15:00</option>
                                <option value="15:30">15:30</option>
                                <option value="16:00">16:00</option>
                                <option value="16:30">16:30</option>
                                <option value="17:00">17:00</option>
                                <option value="17:30">17:30</option>
                                <option value="18:00">18:00</option>
                                <option value="18:30">18:30</option>
                                <option value="19:00">19:00</option>
                            </select>
                        </div>

                        <div class="guests-grid">
                            <div class="field">
                                <label for="bookGuests">Número de Participantes *</label>
                                <input type="number" id="bookGuests" min="1" max="12" value="1">
                            </div>
                            <div class="field" id="jetskiCountField">
                                <label for="bookJetskis">Número de Motos de Agua</label>
                                <input type="number" id="bookJetskis" min="1" max="4" value="1">
                            </div>
                        </div>

                        <div class="field" style="margin-top: 20px;">
                            <label for="bookNotes">Peticiones Especiales (opcional)</label>
                            <textarea id="bookNotes" rows="3" placeholder="Celebración de cumpleaños, preferencia de embarcación, necesidades de accesibilidad..."></textarea>
                        </div>

                        <div class="step-nav">
                            <button class="btn-back" onclick="goToStep(1)"><i class="fas fa-arrow-left"></i> Atrás</button>
                            <button class="btn-next" onclick="goToStep(3)">Continuar <i class="fas fa-arrow-right"></i></button>
                        </div>
                    </div>

                    <!-- PASO 3: Información Personal -->
                    <div class="step-panel" id="step3">
                        <h3><i class="fas fa-user"></i> Tus Datos</h3>
                        
                        <div class="form-grid">
                            <div class="field">
                                <label for="bookFirstName">Nombre *</label>
                                <input type="text" id="bookFirstName" required placeholder="Ej. Juan">
                            </div>
                            <div class="field">
                                <label for="bookLastName">Apellidos *</label>
                                <input type="text" id="bookLastName" required placeholder="Ej. García">
                            </div>
                            <div class="field">
                                <label for="bookEmail">Correo Electrónico *</label>
                                <input type="email" id="bookEmail" required placeholder="juan@ejemplo.com">
                            </div>
                            <div class="field">
                                <label for="bookPhone">Teléfono *</label>
                                <input type="tel" id="bookPhone" required placeholder="+34 XXX XXX XXX">
                            </div>
                            <div class="field">
                                <label for="bookID">DNI/NIE/Pasaporte *</label>
                                <input type="text" id="bookID" required placeholder="Necesario para el contrato">
                            </div>
                            <div class="field">
                                <label for="bookDOB">Fecha de Nacimiento *</label>
                                <input type="date" id="bookDOB" required>
                            </div>
                            <div class="field full">
                                <label for="bookAddress">Dirección en España (si aplica)</label>
                                <input type="text" id="bookAddress" placeholder="Hotel o dirección">
                            </div>
                        </div>

                        <div class="step-nav">
                            <button class="btn-back" onclick="goToStep(2)"><i class="fas fa-arrow-left"></i> Atrás</button>
                            <button class="btn-next" onclick="goToStep(4)">Continuar al Pago <i class="fas fa-arrow-right"></i></button>
                        </div>
                    </div>

                    <!-- PASO 4: Pago -->
                    <div class="step-panel" id="step4">
                        <h3><i class="fas fa-lock"></i> Pago Seguro</h3>

                        <div id="depositSection">
                            <div id="standardDeposit">
                                <h4 style="font-size:0.95rem;margin-bottom:15px;color:var(--gray-700);">Importe del Pago</h4>
                                <div class="deposit-toggle">
                                    <div class="deposit-option selected" onclick="selectDeposit('deposit', event)">
                                        <div class="amount" id="depositAmount">€0</div>
                                        <div class="label">30% Señal — Resto a la llegada</div>
                                    </div>
                                    <div class="deposit-option" onclick="selectDeposit('full', event)">
                                        <div class="amount" id="fullAmount">€0</div>
                                        <div class="label">Pago Total — Sin saldo pendiente</div>
                                    </div>
                                </div>
                            </div>
                            <div id="boatDeposit" style="display:none;">
                                <h4 style="font-size:0.95rem;margin-bottom:15px;color:var(--gray-700);">Señal de Reserva</h4>
                                <div class="boat-deposit-box">
                                    <div class="boat-deposit-amount">
                                        <span class="boat-deposit-label"><i class="fas fa-anchor" style="margin-right:8px;color:var(--primary);"></i>20% de Señal para Asegurar tu Reserva</span>
                                        <span class="boat-deposit-value" id="boatDepositAmount">€0</span>
                                    </div>
                                    <div class="boat-deposit-info">
                                        <i class="fas fa-info-circle"></i>
                                        <p>Una <strong>señal del 20%</strong> asegura tu reserva de yate. El saldo restante se paga directamente al propietario del barco el día del chárter.</p>
                                    </div>
                                    <div class="boat-balance-note">
                                        <i class="fas fa-wallet"></i>
                                        <span>Saldo restante: <strong id="boatBalanceAmount">€0</strong> — se paga al propietario del barco el día del chárter</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 style="font-size:0.95rem;margin-bottom:15px;color:var(--gray-700);">Método de Pago</h4>
                        <div class="payment-methods">
                            <label class="payment-method selected">
                                <input type="radio" name="payment" value="card" checked>
                                <div class="method-info">
                                    <h5>Tarjeta de Crédito/Débito</h5>
                                    <p>Visa, Mastercard</p>
                                </div>
                                <div class="payment-icons">
                                    <i class="fab fa-cc-visa"></i>
                                    <i class="fab fa-cc-mastercard"></i>
                                </div>
                            </label>
                        </div>

                        <div class="card-fields visible" id="cardFields">
                            <div style="text-align:center; padding: 20px; background: rgba(0,180,216,0.06); border-radius: 12px; border: 1px dashed rgba(0,180,216,0.3);">
                                <i class="fas fa-lock" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;"></i>
                                <p style="margin:0; font-weight: 600; color: var(--dark);">Enlace de Pago Seguro</p>
                                <p style="margin: 8px 0 0; font-size: 0.85rem; color: var(--gray-500);">Después de confirmar tu reserva, recibirás un enlace de pago seguro por WhatsApp o email.</p>
                            </div>
                        </div>

                        <div class="terms-check">
                            <input type="checkbox" id="termsAccept" required>
                            <label for="termsAccept">
                                He leído y acepto los <a href="../terms.html" target="_blank" rel="noopener noreferrer">Términos y Condiciones</a>, 
                                la <a href="../terms.html#privacy" target="_blank" rel="noopener noreferrer">Política de Privacidad</a>,
                                la <a href="../terms.html#cancellation" target="_blank" rel="noopener noreferrer">Política de Cancelación</a> y 
                                el <a href="../weather-policy.html" target="_blank" rel="noopener noreferrer">Protocolo de Cancelación por Climatología</a>. 
                                Confirmo tener al menos 18 años (o 16 con consentimiento parental para motos de agua). 
                                Acepto las <a href="https://marbellajetski.com/contratos/rules-and-regulation/" target="_blank" rel="noopener noreferrer">Normas y Regulaciones</a> de Marbella JetSki.
                            </label>
                        </div>

                        <div class="terms-check" style="background: rgba(0,180,216,0.05);">
                            <input type="checkbox" id="mediaConsent">
                            <label for="mediaConsent">
                                Autorizo a Marbella JetSki a capturar y publicar material fotográfico y audiovisual de mi experiencia con fines promocionales (opcional).
                            </label>
                        </div>

                        <div class="step-nav">
                            <button class="btn-back" onclick="goToStep(3)"><i class="fas fa-arrow-left"></i> Atrás</button>
                            <button class="btn-next" onclick="submitBooking()" style="background: linear-gradient(135deg, #10b981, #059669);">
                                <i class="fas fa-lock"></i> Confirmar y Pagar <span id="payButtonAmount"></span>
                            </button>
                        </div>
                    </div>

                    <!-- PASO 5: Confirmación -->
                    <div class="step-panel" id="step5">
                        <div class="confirmation">
                            <div class="confirmation-icon"><i class="fas fa-check"></i></div>
                            <h3>¡Reserva Confirmada!</h3>
                            <p>¡Gracias! Hemos recibido tu solicitud de reserva. Recibirás una confirmación por WhatsApp y email en breve.</p>
                            <div class="booking-ref">
                                <div class="ref-label">Referencia de Reserva</div>
                                <div class="ref-number" id="bookingRef">MJS-2026-XXXXX</div>
                            </div>
                            <p style="font-size:0.85rem;">¿Preguntas? Escríbenos por <a href="https://api.whatsapp.com/send?phone=34655442232" target="_blank" rel="noopener noreferrer" style="color:var(--primary);font-weight:600;">WhatsApp</a> o llama al <a href="tel:+34655442232" style="color:var(--primary);font-weight:600;">+34 655 442 232</a></p>
                            <div style="margin-top:30px;">
                                <a href="index.html" class="btn-next" style="display:inline-block;text-decoration:none;">
                                    <i class="fas fa-home"></i> Volver al Inicio
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resumen del Pedido -->
                <div class="order-summary" id="orderSummary">
                    <h4><i class="fas fa-receipt"></i> Resumen de Reserva</h4>
                    
                    <div class="summary-row">
                        <span class="label">Actividad</span>
                        <span class="value" id="sumActivity">—</span>
                    </div>
                    <div class="summary-row">
                        <span class="label">Duración</span>
                        <span class="value" id="sumDuration">—</span>
                    </div>
                    <div class="summary-row">
                        <span class="label">Fecha</span>
                        <span class="value" id="sumDate">—</span>
                    </div>
                    <div class="summary-row">
                        <span class="label">Hora</span>
                        <span class="value" id="sumTime">—</span>
                    </div>
                    <div class="summary-row">
                        <span class="label">Participantes</span>
                        <span class="value" id="sumGuests">—</span>
                    </div>
                    
                    <div class="summary-divider"></div>
                    
                    <div class="summary-row">
                        <span class="label">Precio Unitario</span>
                        <span class="value" id="sumUnitPrice">—</span>
                    </div>
                    <div class="summary-row" id="sumQtyRow" style="display:none;">
                        <span class="label">Cantidad</span>
                        <span class="value" id="sumQty">—</span>
                    </div>
                    
                    <div class="summary-divider"></div>
                    
                    <div class="summary-total">
                        <span>Total</span>
                        <span class="total-price" id="sumTotal">€0</span>
                    </div>
                    <div class="summary-row" id="sumDepositRow" style="display:none;">
                        <span class="label" id="sumDepositLabel">Señal a Pagar Ahora</span>
                        <span class="value" id="sumDeposit" style="color:var(--primary);font-weight:700;">—</span>
                    </div>
                    <div class="summary-row" id="sumBalanceRow" style="display:none;">
                        <span class="label">Saldo (al propietario del barco)</span>
                        <span class="value" id="sumBalance">—</span>
                    </div>
                    <p style="text-align:center;font-size:0.78rem;color:var(--text-secondary);margin-top:6px;"><i class="fas fa-receipt" style="margin-right:4px;color:var(--primary);opacity:0.7;"></i>Todos los precios incluyen IVA</p>

                    <div class="summary-badges">
                        <div class="summary-badge"><i class="fas fa-check-circle"></i> Cancelación gratuita (24h de antelación)</div>
                        <div class="summary-badge"><i class="fas fa-check-circle"></i> Reembolso total por climatología</div>
                        <div class="summary-badge"><i class="fas fa-check-circle"></i> Equipo de seguridad incluido</div>
                        <div class="summary-badge"><i class="fas fa-check-circle"></i> Seguro de responsabilidad civil</div>
                    </div>

                    <a href="https://api.whatsapp.com/send?phone=34655442232&text=Hola!%20Me%20gustaría%20reservar%20una%20actividad%20acuática!" target="_blank" rel="noopener noreferrer" class="summary-whatsapp">
                        <i class="fab fa-whatsapp"></i> O reserva por WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Barra de Políticas -->
    <section class="policies-bar">
        <div class="container">
            <div class="policies-grid">
                <div class="policy-item">
                    <i class="fas fa-undo"></i>
                    <h5>Cancelación Gratuita</h5>
                    <p>Cancela 24h antes y reembolso completo</p>
                </div>
                <div class="policy-item">
                    <i class="fas fa-cloud-sun-rain"></i>
                    <h5>Garantía Climatológica</h5>
                    <p>100% reembolso si se cancela por mal tiempo</p>
                </div>
                <div class="policy-item">
                    <i class="fas fa-lock"></i>
                    <h5>Pago Seguro</h5>
                    <p>Transacciones cifradas con SSL de 256 bits</p>
                </div>
                <div class="policy-item">
                    <i class="fas fa-shield-alt"></i>
                    <h5>Totalmente Asegurado</h5>
                    <p>Seguro de responsabilidad civil en todas las actividades</p>
                </div>
            </div>
        </div>
    </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-wave">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                <path fill="#03045e" fill-opacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
            </svg>
        </div>
        <div class="footer-content">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-brand">
                        <a href="index.html" class="footer-logo">
                            <img src="../assets/media/photos/logo-circular.png" alt="Marbella JetSki Logo" style="height: 60px; margin-bottom: 15px;">
                            <span class="logo-text">MARBELLA<span class="logo-highlight">JETSKI</span></span>
                        </a>
                        <p>El destino premium de deportes acuáticos en la Costa del Sol. Empresa familiar desde 1998, dirigida por el 4 veces campeón de España Daniel Stiers.</p>
                    </div>
                    <div class="footer-links">
                        <h4>Enlaces Rápidos</h4>
                        <ul>
                            <li><a href="index.html#services">Servicios</a></li>
                            <li><a href="index.html#jetski">Motos de Agua</a></li>
                            <li><a href="index.html#watersports">Deportes Acuáticos</a></li>
                            <li><a href="index.html#boats">Alquiler de Yates</a></li>
                            <li><a href="../index.html#racing-lessons">Clases de Racing</a></li>
                        </ul>
                    </div>
                    <div class="footer-links">
                        <h4>Legal</h4>
                        <ul>
                            <li><a href="../terms.html#legal-notice">Aviso Legal</a></li>
                            <li><a href="../terms.html#terms">Términos y Condiciones</a></li>
                            <li><a href="../terms.html#privacy">Política de Privacidad</a></li>
                            <li><a href="../terms.html#cancellation">Política de Cancelación</a></li>
                            <li><a href="../weather-policy.html">Protocolo Climatológico</a></li>
                            <li><a href="../terms.html#cookies">Política de Cookies</a></li>
                        </ul>
                    </div>
                    <div class="footer-contact">
                        <h4>Contacto</h4>
                        <div class="footer-contact-item"><i class="fas fa-phone-alt"></i> <a href="tel:+34655442232">+34 655 442 232</a></div>
                        <div class="footer-contact-item"><i class="fab fa-whatsapp"></i> <a href="https://api.whatsapp.com/send?phone=34655442232" target="_blank" rel="noopener noreferrer">WhatsApp</a></div>
                        <div class="footer-contact-item"><i class="fas fa-envelope"></i> <a href="mailto:jetskimarbella@gmail.com">jetskimarbella@gmail.com</a></div>
                        <div class="footer-contact-item"><i class="fas fa-clock"></i> <span>Todos los días: 11h - 20h</span></div>
                        
                        <div class="footer-social">
                            <a href="https://www.facebook.com/jetskimarbella/" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="https://www.instagram.com/jetskimarbella/" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                            <a href="https://www.tripadvisor.es/Attraction_Review-g187439-d6949698-Reviews-Marbella_Jet_Ski-Marbella_Costa_del_Sol_Province_of_Malaga_Andalucia.html" target="_blank" rel="noopener noreferrer" aria-label="TripAdvisor"><i class="fab fa-tripadvisor"></i></a>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2026 STIERS E HIJOS S.L. (Marbella JetSki). Todos los derechos reservados. NIF: B92917178</p>
                    <p class="credit">Diseñado con 💙 para el Verano 2026</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
    /* ========== Sistema de Reservas — Lógica ========== */
    let currentStep = 1;
    let selectedActivity = null;
    let totalPrice = 0;
    let depositType = 'deposit';
    const LANG = 'es';
    const MAX_CIRCUIT_JETSKIS = 4;
    const MIN_TOUR_JETSKIS = 2;
    const MIN_TOWABLE_GUESTS = 2;
    const SAME_DAY_CUTOFF_HOUR = 14;
    const BOAT_DEPOSIT_RATE = 0.20;
    const STANDARD_DEPOSIT_RATE = 0.30;

    let calendarMonth = new Date().getMonth();
    let calendarYear = new Date().getFullYear();
    let calendarSelectedDate = null;

    function isBoatBooking() {
        const radio = document.querySelector('input[name="activity"]:checked');
        if (!radio) return false;
        return radio.value.startsWith('azimut') || radio.value.startsWith('cranchi') || radio.value.startsWith('rinker') || radio.value.startsWith('catamaran');
    }

    /* ========== Calendario ========== */
    function renderCalendar() {
        const widget = document.getElementById('calendarWidget');
        if (!widget) return;
        const today = new Date(); today.setHours(0,0,0,0);
        const todayStr = fmtISO(today);
        const first = new Date(calendarYear, calendarMonth, 1);
        const last = new Date(calendarYear, calendarMonth + 1, 0);
        const startWd = (first.getDay() + 6) % 7;
        const mNames = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
        const dNames = ['Lun','Mar','Mi\u00e9','Jue','Vie','S\u00e1b','Dom'];
        const canPrev = calendarYear > today.getFullYear() || (calendarYear === today.getFullYear() && calendarMonth > today.getMonth());
        let h = '<div class="calendar-header">' +
            '<button type="button" class="calendar-nav" onclick="calNav(-1)"' + (canPrev ? '' : ' disabled') + '><i class="fas fa-chevron-left"></i></button>' +
            '<h5>' + mNames[calendarMonth] + ' ' + calendarYear + '</h5>' +
            '<button type="button" class="calendar-nav" onclick="calNav(1)"><i class="fas fa-chevron-right"></i></button></div>';
        h += '<div class="calendar-grid">';
        dNames.forEach(d => { h += '<div class="calendar-day-header">' + d + '</div>'; });
        for (let i = 0; i < startWd; i++) h += '<div class="calendar-day empty"></div>';
        for (let day = 1; day <= last.getDate(); day++) {
            const dt = new Date(calendarYear, calendarMonth, day);
            const ds = fmtISO(dt);
            const past = dt < today;
            let cl = 'calendar-day';
            if (past) cl += ' disabled';
            if (ds === todayStr) cl += ' today';
            if (calendarSelectedDate === ds) cl += ' selected';
            h += '<div class="' + cl + '"' + (past ? '' : ' onclick="calSelect(\'' + ds + '\')"') + '>' + day + '</div>';
        }
        h += '</div>';
        widget.innerHTML = h;
    }
    function fmtISO(d) { return d.getFullYear() + '-' + String(d.getMonth()+1).padStart(2,'0') + '-' + String(d.getDate()).padStart(2,'0'); }
    function calNav(delta) {
        calendarMonth += delta;
        if (calendarMonth > 11) { calendarMonth = 0; calendarYear++; }
        if (calendarMonth < 0) { calendarMonth = 11; calendarYear--; }
        renderCalendar();
    }
    function calSelect(ds) {
        calendarSelectedDate = ds;
        document.getElementById('bookDate').value = ds;
        const bar = document.getElementById('calendarSelectedBar');
        const txt = document.getElementById('calendarSelectedText');
        if (bar && txt) {
            const d = new Date(ds + 'T12:00');
            txt.textContent = d.toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
            bar.classList.remove('hidden');
        }
        renderCalendar();
        checkSameDayCutoff();
        updateSummary();
    }

    /* ========== Reglas de Pago para Barcos ========== */
    function applyBoatPaymentRules() {
        const isBoat = isBoatBooking();
        const std = document.getElementById('standardDeposit');
        const boat = document.getElementById('boatDeposit');
        if (std && boat) {
            if (isBoat) {
                std.style.display = 'none';
                boat.style.display = 'block';
                depositType = 'boat-deposit';
            } else {
                std.style.display = 'block';
                boat.style.display = 'none';
                if (depositType === 'boat-deposit') depositType = 'deposit';
            }
        }
        updateSummary();
    }

    document.addEventListener('DOMContentLoaded', function() {
        renderCalendar();

        // Auto-select activity from URL param
        const urlParams = new URLSearchParams(window.location.search);
        const activityParam = urlParams.get('activity');
        if (activityParam) {
            setTimeout(() => {
                const radio = document.querySelector('input[name="activity"][value="' + activityParam + '"]');
                if (radio) {
                    const label = radio.closest('.activity-option');
                    if (label) {
                        const cat = label.getAttribute('data-cat');
                        if (cat) {
                            const tab = document.querySelector('.cat-tab[data-cat="' + cat + '"]');
                            if (tab) tab.click();
                        }
                    }
                    setTimeout(() => {
                        radio.checked = true;
                        radio.dispatchEvent(new Event('change', { bubbles: true }));
                        const bookingForm = document.querySelector('.booking-form, .step-content, #activityList');
                        if (bookingForm) bookingForm.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 150);
                }
            }, 100);
        }

        document.querySelectorAll('.cat-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.cat-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                const cat = this.dataset.cat;
                document.querySelectorAll('.activity-option').forEach(opt => {
                    opt.style.display = (cat === 'all' || opt.dataset.cat === cat) ? '' : 'none';
                });
                // Reset selection and hide training notice when switching tabs
                document.querySelectorAll('.activity-option').forEach(o => o.classList.remove('selected'));
                document.querySelectorAll('input[name="activity"]').forEach(r => r.checked = false);
                const notice = document.getElementById('trainingNotice');
                if (notice) notice.style.display = 'none';
                const stepNav = document.querySelector('.step-nav');
                if (stepNav) stepNav.style.display = '';
            });
        });

        document.querySelectorAll('input[name="activity"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('.activity-option').forEach(o => o.classList.remove('selected'));
                this.closest('.activity-option').classList.add('selected');
                const notice = document.getElementById('trainingNotice');
                const stepNav = this.closest('.step-content, .step-panel').querySelector('.step-nav');
                if (this.dataset.type === 'request-only') {
                    if (notice) notice.style.display = 'block';
                    if (stepNav) stepNav.style.display = 'none';
                } else {
                    if (notice) notice.style.display = 'none';
                    if (stepNav) stepNav.style.display = '';
                }
                applyActivityConstraints();
                updateSummary();
            });
        });

        ['bookGuests', 'bookJetskis'].forEach(id => {
            const el = document.getElementById(id);
            if (el) el.addEventListener('change', function() { validateConstraints(); updateSummary(); });
        });

        const timeEl = document.getElementById('bookTime');
        if (timeEl) timeEl.addEventListener('change', updateSummary);

        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');
        if (navToggle && navMenu) {
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                navToggle.classList.toggle('active');
            });
        }
    });

    function getActivityType() {
        const radio = document.querySelector('input[name="activity"]:checked');
        if (!radio) return null;
        return radio.dataset.type || (radio.value.startsWith('jetski') ? 'circuit' : null);
    }

    function applyActivityConstraints() {
        const radio = document.querySelector('input[name="activity"]:checked');
        if (!radio) return;
        const type = radio.dataset.type || '';
        const jsField = document.getElementById('jetskiCountField');
        const jsInput = document.getElementById('bookJetskis');
        const guestsInput = document.getElementById('bookGuests');
        if (jsField) jsField.style.display = radio.value.startsWith('jetski') ? '' : 'none';
        if (type === 'circuit' && jsInput) { jsInput.max = MAX_CIRCUIT_JETSKIS; if (parseInt(jsInput.value) > MAX_CIRCUIT_JETSKIS) jsInput.value = MAX_CIRCUIT_JETSKIS; }
        if (type === 'tour' && jsInput) { jsInput.min = MIN_TOUR_JETSKIS; if (parseInt(jsInput.value) < MIN_TOUR_JETSKIS) jsInput.value = MIN_TOUR_JETSKIS; } else if (jsInput) { jsInput.min = 1; }
        if (type === 'sup' && guestsInput) { guestsInput.value = 1; guestsInput.max = 1; guestsInput.disabled = true; } else if (guestsInput) { guestsInput.max = 12; guestsInput.disabled = false; }
        if (type === 'towable' && guestsInput) { guestsInput.min = MIN_TOWABLE_GUESTS; if (parseInt(guestsInput.value) < MIN_TOWABLE_GUESTS) guestsInput.value = MIN_TOWABLE_GUESTS; } else if (guestsInput && type !== 'sup') { guestsInput.min = 1; }
        hideAllValidationMsgs();
    }

    function validateConstraints() {
        const radio = document.querySelector('input[name="activity"]:checked');
        if (!radio) return true;
        const type = radio.dataset.type || '';
        const jsInput = document.getElementById('bookJetskis');
        const guestsInput = document.getElementById('bookGuests');
        let valid = true;
        hideAllValidationMsgs();
        if (type === 'circuit' && jsInput && parseInt(jsInput.value) > MAX_CIRCUIT_JETSKIS) { showMsg('maxJetskiMsg'); jsInput.value = MAX_CIRCUIT_JETSKIS; valid = false; }
        if (type === 'tour' && jsInput && parseInt(jsInput.value) < MIN_TOUR_JETSKIS) { showMsg('minTourMsg'); valid = false; }
        if (type === 'towable' && guestsInput && parseInt(guestsInput.value) < MIN_TOWABLE_GUESTS) { showMsg('minTowableMsg'); valid = false; }
        return valid;
    }

    function checkSameDayCutoff() {
        const dateInput = document.getElementById('bookDate');
        const msg = document.getElementById('sameDayMsg');
        const timeSelect = document.getElementById('bookTime');
        if (!dateInput || !msg) return true;
        const today = new Date().toISOString().split('T')[0];
        const now = new Date();
        if (dateInput.value === today && now.getHours() >= SAME_DAY_CUTOFF_HOUR) {
            showMsg('sameDayMsg');
            if (timeSelect) { Array.from(timeSelect.options).forEach(opt => { if (opt.value) opt.disabled = true; }); timeSelect.value = ''; }
            return false;
        } else {
            hideMsg('sameDayMsg');
            if (timeSelect) Array.from(timeSelect.options).forEach(opt => opt.disabled = false);
            return true;
        }
    }

    function showMsg(id) { const el = document.getElementById(id); if (el) el.classList.add('visible'); }
    function hideMsg(id) { const el = document.getElementById(id); if (el) el.classList.remove('visible'); }
    function hideAllValidationMsgs() { ['sameDayMsg', 'maxJetskiMsg', 'minTourMsg', 'minTowableMsg'].forEach(id => hideMsg(id)); }

    function goToStep(step) {
        if (step > currentStep) {
            if (currentStep === 1) { if (!document.querySelector('input[name="activity"]:checked')) { alert('Por favor, selecciona una actividad para continuar.'); return; } }
            if (currentStep === 2) {
                if (!document.getElementById('bookDate').value || !document.getElementById('bookTime').value) { alert('Por favor, selecciona una fecha y hora.'); return; }
                if (!checkSameDayCutoff()) return;
                if (!validateConstraints()) return;
            }
            if (currentStep === 3) {
                const f = ['bookFirstName','bookLastName','bookEmail','bookPhone','bookID','bookDOB'];
                if (f.some(id => !document.getElementById(id).value)) { alert('Por favor, rellena todos los campos obligatorios.'); return; }
            }
        }
        currentStep = step;
        document.querySelectorAll('.step').forEach((s, i) => { s.classList.remove('active', 'completed'); if (i+1 === step) s.classList.add('active'); if (i+1 < step) s.classList.add('completed'); });
        document.querySelectorAll('.step-panel').forEach(p => p.classList.remove('active'));
        const panel = document.getElementById('step' + step);
        if (panel) panel.classList.add('active');
        if (step === 2) applyActivityConstraints();
        if (step === 4) applyBoatPaymentRules();
        updateSummary();
        window.scrollTo({ top: 200, behavior: 'smooth' });
    }

    function updateSummary() {
        const radio = document.querySelector('input[name="activity"]:checked');
        if (!radio) return;
        const name = radio.dataset.name, duration = radio.dataset.duration, price = parseFloat(radio.dataset.price);
        const perPerson = radio.dataset.per === 'person';
        const guests = parseInt(document.getElementById('bookGuests').value) || 1;
        const jetskis = parseInt(document.getElementById('bookJetskis')?.value) || 1;
        const date = document.getElementById('bookDate').value;
        const time = document.getElementById('bookTime').value;
        let qty = 1;
        if (perPerson) qty = guests; else if (radio.value.startsWith('jetski')) qty = jetskis;
        totalPrice = price * qty;

        document.getElementById('sumActivity').textContent = name;
        document.getElementById('sumDuration').textContent = duration;
        document.getElementById('sumDate').textContent = date ? new Date(date + 'T12:00').toLocaleDateString('es-ES', { day: 'numeric', month: 'short', year: 'numeric' }) : '\u2014';
        document.getElementById('sumTime').textContent = time || '\u2014';
        document.getElementById('sumGuests').textContent = guests;
        document.getElementById('sumUnitPrice').textContent = '\u20ac' + price;
        if (qty > 1) { document.getElementById('sumQtyRow').style.display = ''; document.getElementById('sumQty').textContent = qty + (perPerson ? ' personas' : ' motos'); }
        else { document.getElementById('sumQtyRow').style.display = 'none'; }
        document.getElementById('sumTotal').textContent = '\u20ac' + totalPrice.toLocaleString('es-ES');

        const isBoat = isBoatBooking();
        const rate = isBoat ? BOAT_DEPOSIT_RATE : STANDARD_DEPOSIT_RATE;
        const dep = Math.ceil(totalPrice * rate);
        const bal = totalPrice - dep;

        const depEl = document.getElementById('depositAmount'); if (depEl) depEl.textContent = '\u20ac' + Math.ceil(totalPrice * STANDARD_DEPOSIT_RATE);
        const fullEl = document.getElementById('fullAmount'); if (fullEl) fullEl.textContent = '\u20ac' + totalPrice.toLocaleString('es-ES');
        const boatDepEl = document.getElementById('boatDepositAmount'); if (boatDepEl) boatDepEl.textContent = '\u20ac' + dep;
        const boatBalEl = document.getElementById('boatBalanceAmount'); if (boatBalEl) boatBalEl.textContent = '\u20ac' + bal.toLocaleString('es-ES');

        const sumDepRow = document.getElementById('sumDepositRow');
        const sumBalRow = document.getElementById('sumBalanceRow');
        const sumDepEl = document.getElementById('sumDeposit');
        const sumBalEl = document.getElementById('sumBalance');
        const sumDepLabel = document.getElementById('sumDepositLabel');
        if (isBoat && totalPrice > 0) {
            if (sumDepRow) { sumDepRow.style.display = ''; sumDepLabel.textContent = 'Se\u00f1al a Pagar Ahora (20%)'; }
            if (sumDepEl) sumDepEl.textContent = '\u20ac' + dep;
            if (sumBalRow) sumBalRow.style.display = '';
            if (sumBalEl) sumBalEl.textContent = '\u20ac' + bal.toLocaleString('es-ES');
        } else if (totalPrice > 0 && depositType === 'deposit') {
            if (sumDepRow) { sumDepRow.style.display = ''; sumDepLabel.textContent = 'Se\u00f1al a Pagar Ahora (30%)'; }
            if (sumDepEl) sumDepEl.textContent = '\u20ac' + Math.ceil(totalPrice * STANDARD_DEPOSIT_RATE);
            if (sumBalRow) sumBalRow.style.display = 'none';
        } else {
            if (sumDepRow) sumDepRow.style.display = 'none';
            if (sumBalRow) sumBalRow.style.display = 'none';
        }

        let payAmt;
        if (isBoat) payAmt = dep;
        else payAmt = depositType === 'full' ? totalPrice : Math.ceil(totalPrice * STANDARD_DEPOSIT_RATE);
        const payBtn = document.getElementById('payButtonAmount');
        if (payBtn) payBtn.textContent = ' \u20ac' + payAmt;
    }

    function selectDeposit(type, ev) {
        if (isBoatBooking()) { depositType = 'boat-deposit'; return; }
        depositType = type;
        document.querySelectorAll('.deposit-option').forEach(o => o.classList.remove('selected'));
        if (ev) ev.currentTarget.classList.add('selected');
        updateSummary();
    }

    function submitBooking() {
        if (!document.getElementById('termsAccept').checked) { alert('Por favor, acepta los T\u00e9rminos y Condiciones para continuar.'); return; }
        if (!validateConstraints()) return;

        const ref = 'MJS-' + new Date().getFullYear() + '-' + Math.random().toString(36).substr(2, 5).toUpperCase();
        document.getElementById('bookingRef').textContent = ref;

        const activityEl = document.querySelector('input[name="activity"]:checked');
        const activityName = activityEl ? (activityEl.dataset.nameEn || activityEl.dataset.name) : '';
        const activityNameES = activityEl ? activityEl.dataset.name : '';
        const activityDuration = activityEl ? activityEl.dataset.duration : '';
        const date = document.getElementById('bookDate').value;
        const time = document.getElementById('bookTime').value;
        const guests = document.getElementById('bookGuests').value;
        const firstName = document.getElementById('bookFirstName').value;
        const lastName = document.getElementById('bookLastName').value;
        const email = document.getElementById('bookEmail').value;
        const phone = document.getElementById('bookPhone').value;

        const isBoat = isBoatBooking();
        const rate = isBoat ? BOAT_DEPOSIT_RATE : STANDARD_DEPOSIT_RATE;
        const payAmount = (isBoat || depositType !== 'full') ? Math.ceil(totalPrice * rate) : totalPrice;
        const payType = isBoat ? 'Tarjeta (20% se\u00f1al barco)' : 'Tarjeta (' + depositType + ')';

        const msg = '🚤 NUEVA RESERVA (ES)\n' +
            'Ref: ' + ref + '\n\n' +
            'Actividad: ' + activityNameES + ' (' + activityDuration + ')\n' +
            'Fecha: ' + date + '\nHora: ' + time + '\nParticipantes: ' + guests + '\n\n' +
            'Nombre: ' + firstName + ' ' + lastName + '\n' +
            'Email: ' + email + '\nTel\u00e9fono: ' + phone + '\n\n' +
            'Pago: ' + payType + '\n' +
            'Importe: \u20ac' + payAmount + ' de \u20ac' + totalPrice + ' total' +
            (isBoat ? '\nSaldo: \u20ac' + (totalPrice - payAmount) + ' (al propietario del barco)' : '') +
            '\nIdioma: Espa\u00f1ol\n\n' +
            'Enviado desde marbellajetski.com (versi\u00f3n ES)';

        currentStep = 5;
        document.querySelectorAll('.step').forEach(s => s.classList.add('completed'));
        document.querySelectorAll('.step-panel').forEach(p => p.classList.remove('active'));
        document.getElementById('step5').classList.add('active');
        document.getElementById('orderSummary').style.display = 'none';
        window.scrollTo({ top: 200, behavior: 'smooth' });
        setTimeout(() => { window.open('https://api.whatsapp.com/send?phone=34655442232&text=' + encodeURIComponent(msg), '_blank'); }, 1500);
    }
    </script>
</body>
</html>
